<style>
    #game {
        display: flex;
        flex-wrap: wrap;
    }
    .tile {
        border: 1px solid #333;
        font-size: 30px;
        cursor: pointer;
        position: relative;
        height: 45px;
        flex-basis: calc(100% / 10);
        text-align: center;
    }
    .tile .layer {
        position: absolute;
        background: transparent;
        height: 100%;
        width: 100%;
        left: 0;
        bottom: 0;
    }
</style>
<div id="game"></div>

<script>
    class Minesweeper {

        constructor(blocks) {
            this.blocks = blocks || 6;
            this.bomb_at_tiles = [];
            this.neighbors = {
                top_left : null,
                top : null,
                top_right : null,
                left : null,
                right : null,
                bottom_left : null,
                bottom : null,
                bottom_right : null
            };
            self = this;
        }

        drawBoard() {
            for(var i=1; i<this.blocks+1; i++) {
                for(var j=1; j<this.blocks+1; j++) {
                    let a = document.createElement('div');
                    // let b = document.createElement('span');
                    // b.setAttribute('class', 'layer');
                    a.setAttribute('class', 'tile');
                    a.setAttribute('data-x', `${i}`);
                    a.setAttribute('data-y', `${j}`);
                    a.setAttribute('id', `${i}${j}`);
                    a.setAttribute('data-has-bomb', false);
                    // ðŸ”¥
                    // a.appendChild(b);
                    // a.innerHTML = '&nbsp;';
                    document.getElementById('game').appendChild(a);
                    a.addEventListener('click', this.checkNeighbors);
                }
                let a = document.createElement('br');
                document.getElementById('game').append(a);
            }
        }

        placeBombs() {
            var i = 0;
            while(i < 23){
                let place = Math.floor(Math.random() * (99 - 11 + 1)) + 11;
                if(document.getElementById(place) && this.bomb_at_tiles.indexOf(place) == -1) {
                    document.getElementById(place).innerHTML = 'ðŸ’£';
                    document.getElementById(place).setAttribute('data-has-bomb', true);
                    this.bomb_at_tiles.push(place);
                    i++;
                }
            }
            console.log(this.bomb_at_tiles);
        }

        checkNeighbors(ele) {
            var prev_tile, next_tile;
            var total_bombs;
            prev_tile = next_tile = null;
            total_bombs = 0;
            if(ele.target.dataset.x > 1) {
                prev_tile = parseInt(ele.target.dataset.x)-1;
            }
            if(ele.target.dataset.x < self.blocks) {
                next_tile = parseInt(ele.target.dataset.x)+1;
            }
            self.neighbors.top_left = (prev_tile) ? prev_tile.toString() + (parseInt(ele.target.dataset.y) - 1).toString() : null;
            self.neighbors.top = (prev_tile) ? prev_tile.toString() + (ele.target.dataset.y).toString() : null;
            self.neighbors.top_right = (prev_tile && ele.target.dataset.y !== self.blocks.toString()) ? prev_tile.toString() + (parseInt(ele.target.dataset.y) + 1).toString() : null;
            self.neighbors.left = (ele.target.dataset.y !== '1') ? (ele.target.dataset.x).toString() + (parseInt(ele.target.dataset.y) - 1).toString() : null;
            self.neighbors.right = (ele.target.dataset.y !== self.blocks.toString()) ? (ele.target.dataset.x).toString() + (parseInt(ele.target.dataset.y) + 1).toString() : null;
            self.neighbors.bottom_left = (next_tile && ele.target.dataset.y !== '1') ? next_tile.toString() + (parseInt(ele.target.dataset.y) - 1).toString() : null;
            self.neighbors.bottom = (next_tile) ? next_tile.toString() + (ele.target.dataset.y).toString() : null;
            self.neighbors.bottom_right = (next_tile && ele.target.dataset.y !== self.blocks.toString()) ? next_tile.toString() + (parseInt(ele.target.dataset.y) + 1).toString() : null;
            Object.keys(self.neighbors).forEach(neighbor => {
                if(document.getElementById(self.neighbors[neighbor])) {
                    if(document.getElementById(self.neighbors[neighbor]).dataset.hasBomb == 'true') {
                        total_bombs += 1;
                    }
                }
            });
            ele.target.innerHTML = total_bombs;
        }
    }

    my_game = new Minesweeper(9);
    my_game.drawBoard();
    my_game.placeBombs();
</script>